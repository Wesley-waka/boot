{"ast":null,"code":"import _toConsumableArray from \"/home/wesley-waka/wewe/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/wesley-waka/wewe/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/wesley-waka/wewe/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/wesley-waka/wewe/my-app/src/context/filter_context.js\";\nimport React, { useEffect, useContext, useReducer } from 'react';\nimport reducer from '../reducers/filter_reducer';\nimport { useProductsContext } from './products_context';\nvar LOAD_PRODUCTS = 'LOAD_PRODUCTS';\nvar UPDATE_SORT = 'UPDATE_SORT';\nvar SORT_PRODUCTS = 'SORT_PRODUCTS';\nvar UPDATE_FILTERS = 'UPDATE_FILTERS';\nvar FILTER_PRODUCTS = 'FILTER_PRODUCTS';\nvar CLEAR_FILTERS = 'CLEAR_FILTERS';\nvar initialState = {\n  filtered_products: [],\n  all_products: [],\n  sort: 'price-lowest',\n  filters: {\n    text: '',\n    company: 'all',\n    category: 'all',\n    shipping: false\n  }\n};\nvar FilterContext = React.createContext();\nexport var FilterProvider = function FilterProvider(_ref) {\n  var children = _ref.children;\n  var _useProductsContext = useProductsContext(),\n    products = _useProductsContext.products;\n  var _useReducer = useReducer(reducer, initialState),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  useEffect(function () {\n    dispatch({\n      type: LOAD_PRODUCTS,\n      payload: products\n    });\n  }, [products]);\n  useEffect(function () {\n    dispatch({\n      type: FILTER_PRODUCTS\n    });\n    dispatch({\n      type: SORT_PRODUCTS\n    });\n  }, [products, state.sort, state.filters]);\n  var updateSort = function updateSort(e) {\n    var value = e.target.value;\n    dispatch({\n      type: UPDATE_SORT,\n      payload: value\n    });\n  };\n  var updateFilters = function updateFilters(e) {\n    var name = e.target.name;\n    var value = e.target.value;\n    if (name === 'category') {\n      value = e.target.textContent;\n    }\n    if (name === 'shipping') {\n      value = e.target.checked;\n    }\n    dispatch({\n      type: UPDATE_FILTERS,\n      payload: {\n        name: name,\n        value: value\n      }\n    });\n  };\n  var clearFilters = function clearFilters() {\n    dispatch({\n      type: CLEAR_FILTERS\n    });\n  };\n  return /*#__PURE__*/React.createElement(FilterContext.Provider, {\n    value: _objectSpread({}, state, {\n      updateSort: updateSort,\n      updateFilters: updateFilters,\n      clearFilters: clearFilters\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport var useFilterContext = function useFilterContext() {\n  return useContext(FilterContext);\n};\nexport var getUniqueValues = function getUniqueValues(data, type) {\n  var unique = data.map(function (item) {\n    return item[type];\n  });\n  return ['all'].concat(_toConsumableArray(new Set(unique)));\n};","map":{"version":3,"names":["React","useEffect","useContext","useReducer","reducer","useProductsContext","LOAD_PRODUCTS","UPDATE_SORT","SORT_PRODUCTS","UPDATE_FILTERS","FILTER_PRODUCTS","CLEAR_FILTERS","initialState","filtered_products","all_products","sort","filters","text","company","category","shipping","FilterContext","createContext","FilterProvider","children","products","state","dispatch","type","payload","updateSort","e","value","target","updateFilters","name","textContent","checked","clearFilters","useFilterContext","getUniqueValues","data","unique","map","item","Set"],"sources":["/home/wesley-waka/wewe/my-app/src/context/filter_context.js"],"sourcesContent":["import React, { useEffect, useContext, useReducer } from 'react'\nimport reducer from '../reducers/filter_reducer'\nimport { useProductsContext } from './products_context'\n\n\nconst LOAD_PRODUCTS = 'LOAD_PRODUCTS'\nconst UPDATE_SORT = 'UPDATE_SORT'\nconst SORT_PRODUCTS = 'SORT_PRODUCTS'\nconst UPDATE_FILTERS = 'UPDATE_FILTERS'\nconst FILTER_PRODUCTS = 'FILTER_PRODUCTS'\nconst CLEAR_FILTERS = 'CLEAR_FILTERS'\nconst initialState = {\n  filtered_products: [],\n  all_products: [],\n  sort: 'price-lowest',\n  filters: {\n    text: '',\n    company: 'all',\n    category: 'all',\n    shipping: false,\n  },\n}\n\nconst FilterContext = React.createContext()\n\nexport const FilterProvider = ({ children }) => {\n  const { products } = useProductsContext()\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  useEffect(() => {\n    dispatch({ type: LOAD_PRODUCTS, payload: products })\n  }, [products])\n\n  useEffect(() => {\n    dispatch({ type: FILTER_PRODUCTS })\n    dispatch({ type: SORT_PRODUCTS })\n  }, [products, state.sort, state.filters])\n\n\n  const updateSort = (e) => {\n\n    const value = e.target.value\n    dispatch({ type: UPDATE_SORT, payload: value })\n  }\n  const updateFilters = (e) => {\n    let name = e.target.name\n    let value = e.target.value\n    if (name === 'category') {\n      value = e.target.textContent\n    }\n   \n    if (name === 'shipping') {\n      value = e.target.checked\n    }\n    dispatch({ type: UPDATE_FILTERS, payload: { name, value } })\n  }\n  const clearFilters = () => {\n    dispatch({ type: CLEAR_FILTERS })\n  }\n  return (\n    <FilterContext.Provider\n      value={{\n        ...state,\n        updateSort,\n        updateFilters,\n        clearFilters,\n      }}\n    >\n      {children}\n    </FilterContext.Provider>\n  )\n}\n\nexport const useFilterContext = () => {\n  return useContext(FilterContext)\n}\n\nexport const getUniqueValues = (data, type) => {\n  let unique = data.map((item) => item[type])\n  return ['all', ...new Set(unique)]\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}